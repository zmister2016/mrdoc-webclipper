"use strict";
(globalThis["webpackChunkmrdoc_webclipper"] = globalThis["webpackChunkmrdoc_webclipper"] || []).push([[595],{

/***/ 9595:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ OptionsPage)
});

// EXTERNAL MODULE: ./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(9835);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/OptionsPage.vue?vue&type=template&id=76f95bc0


const _hoisted_1 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
  class: "text-h5 text-weight-bold text-center"
}, "MrDoc速记配置中心", -1);

const _hoisted_2 = {
  class: "q-mt-md"
};

const _hoisted_3 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" 文档模式： ");

const _hoisted_4 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("br", null, null, -1);

const _hoisted_5 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("br", null, null, -1);

const _hoisted_6 = {
  class: "q-mt-md option-btns"
};

const _hoisted_7 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("div", {
  class: "q-mt-lg q-pt-lg text-center"
}, [/*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
  class: "text-weight-light"
}, [/*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
  href: "https://mrdoc.pro",
  target: "_blank"
}, "MrDoc 觅思文档"), /*#__PURE__*/(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" - 私有化在线文档和知识库系统")]), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("br"), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("span", {
  class: "text-weight-light"
}, [/*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
  href: "https://gitee.com/zmister/MrDoc",
  target: "_blank"
}, "Web 开源版"), /*#__PURE__*/(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" | "), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
  href: "https://gitee.com/zmister/mrdoc-desktop-release",
  target: "_blank"
}, "桌面客户端"), /*#__PURE__*/(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" | "), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
  href: "https://gitee.com/zmister/mrdoc-app-release",
  target: "_blank"
}, "移动客户端"), /*#__PURE__*/(0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" | "), /*#__PURE__*/(0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
  href: "https://gitee.com/zmister/mrdoc-webclipper",
  target: "_blank"
}, "浏览器扩展")])], -1);

function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_q_toolbar_title = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-toolbar-title");

  const _component_q_toolbar = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-toolbar");

  const _component_q_header = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-header");

  const _component_q_icon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-icon");

  const _component_q_input = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-input");

  const _component_q_select = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-select");

  const _component_q_radio = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-radio");

  const _component_q_toggle = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-toggle");

  const _component_q_btn = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-btn");

  const _component_q_page_container = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-page-container");

  const _component_q_layout = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-layout");

  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_q_layout, {
    view: "hHh lpr fFf",
    class: "bg-white q-ma-lg q-pa-lg position-relative",
    style: {
      "max-width": "600px",
      "margin": "0 auto"
    }
  }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_header, {
      class: "bg-white text-black",
      "height-hint": "98"
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_toolbar, null, {
        default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_toolbar_title)]),
        _: 1
      })]),
      _: 1
    }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_page_container, {
      class: "q-pa-lg"
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [_hoisted_1, (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
        color: "black",
        modelValue: $data.mrdocUrl,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = $event => $data.mrdocUrl = $event),
        label: "MrDoc服务地址"
      }, {
        prepend: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
          name: "cloud"
        })]),
        _: 1
      }, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
        color: "black",
        modelValue: $data.mrdocUserToken,
        "onUpdate:modelValue": _cache[1] || (_cache[1] = $event => $data.mrdocUserToken = $event),
        label: "用户Token"
      }, {
        prepend: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
          name: "key"
        })]),
        _: 1
      }, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_select, {
        modelValue: $data.defaultProject,
        "onUpdate:modelValue": _cache[2] || (_cache[2] = $event => $data.defaultProject = $event),
        options: $data.projects,
        "emit-value": "",
        "map-options": "",
        label: "默认归属文集",
        color: "grey-10"
      }, null, 8, ["modelValue", "options"]), _hoisted_3, (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_radio, {
        modelValue: $data.editorMode,
        "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => $data.editorMode = $event),
        val: "1",
        label: "Markdown",
        color: "grey-10"
      }, null, 8, ["modelValue"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_radio, {
        modelValue: $data.editorMode,
        "onUpdate:modelValue": _cache[4] || (_cache[4] = $event => $data.editorMode = $event),
        val: "3",
        label: "富文本",
        color: "grey-10"
      }, null, 8, ["modelValue"]), _hoisted_4, (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_toggle, {
        color: "grey-10",
        modelValue: $data.useMouse,
        "onUpdate:modelValue": _cache[5] || (_cache[5] = $event => $data.useMouse = $event),
        label: "鼠标选择：",
        "left-label": ""
      }, null, 8, ["modelValue"]), _hoisted_5]), (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_6, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
        class: "q-pl-ld q-pr-ld",
        onClick: $options.checkToken,
        "text-color": "black",
        label: "验证",
        icon: "eva-globe-outline"
      }, null, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
        class: "",
        onClick: $options.onSubmit,
        label: "保存",
        icon: "eva-save-outline"
      }, null, 8, ["onClick"])]), _hoisted_7]),
      _: 1
    })]),
    _: 1
  });
}
;// CONCATENATED MODULE: ./src/pages/OptionsPage.vue?vue&type=template&id=76f95bc0

// EXTERNAL MODULE: ./node_modules/quasar/src/composables/use-quasar.js
var use_quasar = __webpack_require__(9302);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/create-meta-mixin.js
var create_meta_mixin = __webpack_require__(1020);
// EXTERNAL MODULE: ./node_modules/axios/index.js
var axios = __webpack_require__(9981);
var axios_default = /*#__PURE__*/__webpack_require__.n(axios);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/OptionsPage.vue?vue&type=script&lang=js



/* harmony default export */ const OptionsPagevue_type_script_lang_js = ({
  mixins: [(0,create_meta_mixin/* default */.Z)(function () {
    return {
      title: this.pageTitle
    };
  })],

  setup() {
    const $q = (0,use_quasar/* default */.Z)();
  },

  data() {
    return {
      pageTitle: "选项页 - MrDoc速记",
      defaultProject: "",
      // 默认文集
      projects: [],
      // 文集列表
      editorMode: "1",
      // 默认编辑器模式
      mrdocUrl: "",
      // mrdoc服务地址
      mrdocUserToken: "",
      // 用户token
      useMouse: false,
      // 鼠标选择
      saveImg: false,
      // 图片转存
      showSearchResult: false //搜索引擎显示结果

    };
  },

  computed: {},

  mounted() {
    this.mrdocClipperOptions = chrome.storage.local;
    this.readConfig();
  },

  methods: {
    // 读取配置
    async readConfig() {
      // 从 chrome.storage.local 中读取配置信息
      await this.mrdocClipperOptions.get(["mrdocUrl"], r => {
        // console.log(r);
        this.mrdocUrl = r["mrdocUrl"];
      });
      await this.mrdocClipperOptions.get(["mrdocUserToken"], r => {
        // console.log(r);
        this.mrdocUserToken = r["mrdocUserToken"];

        if (this.mrdocUrl != "" && this.mrdocUserToken != "") {
          this.getProjects();
        }
      });
      await this.mrdocClipperOptions.get(["defaultProject"], r => {
        this.defaultProject = r["defaultProject"];
      });
      await this.mrdocClipperOptions.get(["editorMode"], r => {
        this.editorMode = r["editorMode"] == "3" ? "3" : "1";
      });
      await this.mrdocClipperOptions.get(["useMouse"], r => {
        this.useMouse = r["useMouse"] == true ? true : false;
      });
      await this.mrdocClipperOptions.get(["saveImg"], r => {
        this.saveImg = r["saveImg"] == true ? true : false;
      });
      await this.mrdocClipperOptions.get(["showSearchResult"], r => {
        this.showSearchResult = r["showSearchResult"] == true ? true : false;
      });
      return;
    },

    // 处理 MrDoc URL 字符串
    handleMrdocUrl() {
      if (this.mrdocUrl.endsWith("/")) {
        let length = this.mrdocUrl.length;
        let newArr = this.mrdocUrl.split("");
        newArr[length - 1] = "";
        this.mrdocUrl = newArr.join("");
      }
    },

    // 保存配置
    onSubmit() {
      console.log("submit!");
      this.handleMrdocUrl();
      this.mrdocClipperOptions.set({
        mrdocUrl: this.mrdocUrl,
        mrdocUserToken: this.mrdocUserToken,
        editorMode: this.editorMode,
        defaultProject: this.defaultProject,
        useMouse: this.useMouse,
        saveImg: this.saveImg,
        showSearchResult: this.showSearchResult
      });
      this.$q.notify({
        message: "保存成功！",
        icon: "check",
        position: "top"
      });
    },

    // 验证配置
    checkToken() {
      this.handleMrdocUrl();

      if (this.mrdocUrl == "" || this.mrdocUserToken == "") {
        this.$q.notify({
          message: "表单不能为空",
          icon: "warning",
          position: "top"
        });
        return;
      }

      this.$q.loading.show();
      axios_default().request({
        url: this.mrdocUrl + "/api/get_projects/?token=" + this.mrdocUserToken,
        method: "get"
      }).then(r => {
        // console.log(r)
        this.$q.loading.hide();

        if (r.data.status) {
          for (var i = 0; i < r.data.data.length; i++) {
            this.projects.push({
              label: r.data.data[i]["name"],
              value: r.data.data[i]["id"].toString()
            });
          }

          this.$q.notify({
            message: "验证成功！",
            icon: "check",
            position: "top"
          });
        } else {
          this.$q.notify({
            message: "验证失败！",
            icon: "error",
            position: "top"
          });
        }
      }).catch(() => {
        this.$q.loading.hide();
        this.$q.notify({
          message: "验证出错！",
          icon: "error",
          position: "top"
        });
      });
    },

    // 获取文集列表
    getProjects() {
      axios_default().request({
        url: this.mrdocUrl + "/api/get_projects/?token=" + this.mrdocUserToken,
        method: "get"
      }).then(r => {
        // console.log(r)
        if (r.data.status) {
          for (var i = 0; i < r.data.data.length; i++) {
            this.projects.push({
              label: r.data.data[i]["name"],
              value: r.data.data[i]["id"].toString()
            });
          } // this.$q.notify({message:"获取文集列表成功！",icon: 'check',position:'top'})

        } else {
          this.$q.notify({
            message: "获取文集列表失败！",
            icon: "error",
            position: "top"
          });
        }
      }).catch(() => {
        this.$q.notify({
          message: "获取文集列表出错！",
          icon: "error",
          position: "top"
        });
      });
    }

  }
});
;// CONCATENATED MODULE: ./src/pages/OptionsPage.vue?vue&type=script&lang=js
 
// EXTERNAL MODULE: ./node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(1639);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/layout/QLayout.js
var QLayout = __webpack_require__(249);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/header/QHeader.js
var QHeader = __webpack_require__(6602);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbar.js
var QToolbar = __webpack_require__(1663);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbarTitle.js
var QToolbarTitle = __webpack_require__(1973);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPageContainer.js
var QPageContainer = __webpack_require__(2133);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules
var QInput = __webpack_require__(6611);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js
var QIcon = __webpack_require__(2857);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/select/QSelect.js + 6 modules
var QSelect = __webpack_require__(752);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/radio/QRadio.js
var QRadio = __webpack_require__(1480);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toggle/QToggle.js + 1 modules
var QToggle = __webpack_require__(7137);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js
var QBtn = __webpack_require__(8879);
// EXTERNAL MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js
var runtime_auto_import = __webpack_require__(9984);
var runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);
;// CONCATENATED MODULE: ./src/pages/OptionsPage.vue




;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(OptionsPagevue_type_script_lang_js, [['render',render]])

/* harmony default export */ const OptionsPage = (__exports__);
;











runtime_auto_import_default()(OptionsPagevue_type_script_lang_js, 'components', {QLayout: QLayout/* default */.Z,QHeader: QHeader/* default */.Z,QToolbar: QToolbar/* default */.Z,QToolbarTitle: QToolbarTitle/* default */.Z,QPageContainer: QPageContainer/* default */.Z,QInput: QInput/* default */.Z,QIcon: QIcon/* default */.Z,QSelect: QSelect/* default */.Z,QRadio: QRadio/* default */.Z,QToggle: QToggle/* default */.Z,QBtn: QBtn/* default */.Z});


/***/ })

}]);